
**Visitor** (рЃАрЃбрЃБрЃЏрЃљрЃарЃў) рЃљрЃарЃўрЃА рЃЦрЃфрЃћрЃЋрЃўрЃЌрЃў рЃбрЃўрЃърЃўрЃА рЃърЃљрЃбрЃћрЃарЃюрЃў, рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃАрЃљрЃерЃБрЃљрЃџрЃћрЃЉрЃљрЃА рЃњрЃЋрЃљрЃФрЃџрЃћрЃЋрЃА рЃњрЃљрЃЏрЃЮрЃЋрЃљрЃфрЃљрЃџрЃЎрЃћрЃЋрЃЮрЃЌ рЃљрЃџрЃњрЃЮрЃарЃўрЃЌрЃЏрЃћрЃЉрЃў рЃўрЃЏ рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃћрЃЉрЃўрЃАрЃњрЃљрЃю, рЃарЃЮрЃЏрЃџрЃћрЃЉрЃќрЃћрЃф рЃўрЃАрЃўрЃюрЃў рЃЏрЃБрЃерЃљрЃЮрЃЉрЃћрЃю. рЃћрЃА рЃърЃљрЃбрЃћрЃюрЃў рЃњрЃљрЃюрЃАрЃљрЃЎрЃБрЃЌрЃарЃћрЃЉрЃўрЃЌ рЃњрЃљрЃЏрЃЮрЃАрЃљрЃЊрЃћрЃњрЃўрЃљ, рЃарЃЮрЃЊрЃћрЃАрЃљрЃф рЃАрЃљрЃГрЃўрЃарЃЮрЃљ рЃљрЃарЃАрЃћрЃЉрЃБрЃџ рЃЎрЃџрЃљрЃАрЃћрЃЉрЃќрЃћ рЃљрЃ«рЃљрЃџрЃў рЃцрЃБрЃюрЃЦрЃфрЃўрЃЮрЃюрЃљрЃџрЃўрЃЊ рЃЊрЃљрЃЏрЃљрЃбрЃћрЃЉрЃљ рЃўрЃАрЃћ, рЃарЃЮрЃЏ рЃљрЃа рЃерЃћрЃўрЃфрЃЋрЃљрЃџрЃЮрЃА рЃЏрЃљрЃЌрЃў рЃЎрЃЮрЃЊрЃў.


#### рЃарЃЮрЃЊрЃўрЃА рЃњрЃљрЃЏрЃЮрЃЋрЃўрЃДрЃћрЃюрЃЮрЃЌ Visitor рЃърЃљрЃбрЃћрЃарЃюрЃў?
- рЃарЃЮрЃфрЃљ рЃњрЃЋрЃўрЃюрЃЊрЃљ рЃљрЃарЃАрЃћрЃЉрЃБрЃџ рЃЎрЃљрЃџрЃАрЃћрЃЉрЃерЃў рЃљрЃ«рЃљрЃџрЃў рЃцрЃБрЃюрЃЦрЃфрЃўрЃЮрЃюрЃљрЃџрЃўрЃА рЃЊрЃљрЃЏрЃљрЃбрЃћрЃЉрЃљ **рЃЏрЃћрЃЏрЃЎрЃЋрЃўрЃЊрЃарЃћрЃЮрЃЉрЃўрЃА рЃњрЃљрЃарЃћрЃерЃћ**.
- рЃарЃЮрЃЊрЃћрЃАрЃљрЃф рЃАрЃ«рЃЋрЃљрЃЊрЃљрЃАрЃ«рЃЋрЃљ рЃбрЃўрЃърЃўрЃА рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃћрЃЉрЃќрЃћ рЃњрЃЋрЃАрЃБрЃарЃА рЃћрЃарЃЌрЃюрЃљрЃўрЃарЃў рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃћрЃЉрЃўрЃА рЃерЃћрЃАрЃарЃБрЃџрЃћрЃЉрЃљ.
- рЃарЃЮрЃЊрЃћрЃАрЃљрЃф рЃЎрЃџрЃљрЃАрЃћрЃЉрЃўрЃА рЃАрЃбрЃарЃБрЃЦрЃбрЃБрЃарЃљ рЃ«рЃерЃўрЃарЃљрЃЊ рЃўрЃфрЃЋрЃџрЃћрЃЉрЃљ, рЃЏрЃљрЃњрЃарЃљрЃЏ рЃЏрЃљрЃЌрЃќрЃћ рЃерЃћрЃАрЃарЃБрЃџрЃћрЃЉрЃБрЃџрЃў рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃћрЃЉрЃў рЃБрЃфрЃЋрЃџрЃћрЃџрЃўрЃљ.
---

#### Visitor рЃърЃљрЃбрЃћрЃарЃюрЃўрЃА рЃўрЃЏрЃърЃџрЃћрЃЏрЃћрЃюрЃбрЃљрЃфрЃўрЃљ 

##### 1. рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃўрЃА рЃерЃћрЃЦрЃЏрЃюрЃљ рЃћрЃџрЃћрЃЏрЃћрЃюрЃбрЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА

рЃърЃўрЃарЃЋрЃћрЃџ рЃарЃўрЃњрЃерЃў, рЃЊрЃљрЃЋрЃгрЃћрЃарЃЮрЃЌ **Element** рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃў, рЃарЃЮрЃЏрЃћрЃџрЃАрЃљрЃф рЃћрЃЦрЃюрЃћрЃЉрЃљ **accept()** рЃЏрЃћрЃЌрЃЮрЃЊрЃў:

```php
<?php
interface Element {
    public function accept(Visitor $visitor);
}
```

##### 2. рЃЎрЃЮрЃюрЃЎрЃарЃћрЃбрЃБрЃџрЃў рЃћрЃџрЃћрЃЏрЃћрЃюрЃбрЃћрЃЉрЃўрЃА рЃерЃћрЃЦрЃЏрЃюрЃљ

рЃерЃћрЃЋрЃЦрЃЏрЃюрЃљрЃЌ рЃЮрЃарЃў рЃЎрЃџрЃљрЃАрЃў, рЃарЃЮрЃЏрЃџрЃћрЃЉрЃўрЃф рЃўрЃЏрЃърЃџрЃћрЃЏрЃћрЃюрЃбрЃљрЃфрЃўрЃљрЃА рЃњрЃљрЃБрЃгрЃћрЃЋрЃћрЃю **Element** рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃА:

```php
class Book implements Element {
    private string $title;
    private float $price;

    public function __construct(string $title, float $price) {
        $this->title = $title;
        $this->price = $price;
    }

    public function getTitle(): string {
        return $this->title;
    }

    public function getPrice(): float {
        return $this->price;
    }

    public function accept(Visitor $visitor) {
        $visitor->visitBook($this);
    }
}

class DVD implements Element {
    private string $title;
    private float $price;

    public function __construct(string $title, float $price) {
        $this->title = $title;
        $this->price = $price;
    }

    public function getTitle(): string {
        return $this->title;
    }

    public function getPrice(): float {
        return $this->price;
    }

    public function accept(Visitor $visitor) {
        $visitor->visitDVD($this);
    }
}
```


##### 3. Visitor рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃў

Visitor рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃў рЃерЃћрЃўрЃфрЃљрЃЋрЃА рЃЏрЃћрЃЌрЃЮрЃЊрЃћрЃЉрЃА рЃЌрЃўрЃЌрЃЮрЃћрЃБрЃџрЃў рЃћрЃџрЃћрЃЏрЃћрЃюрЃбрЃўрЃА рЃбрЃўрЃърЃўрЃАрЃЌрЃЋрЃўрЃА:
```php
interface Visitor {
    public function visitBook(Book $book);
    public function visitDVD(DVD $dvd);
}
```

##### 4. рЃЎрЃЮрЃюрЃЎрЃарЃћрЃбрЃБрЃџрЃў рЃЋрЃўрЃќрЃўрЃбрЃЮрЃарЃћрЃЉрЃўрЃА рЃерЃћрЃЦрЃЏрЃюрЃљ

рЃерЃћрЃЋрЃЦрЃЏрЃюрЃљрЃЌ **DiscountVisitor**, рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃЊрЃљрЃўрЃЌрЃЋрЃџрЃўрЃА рЃцрЃљрЃАрЃЊрЃљрЃЎрЃџрЃћрЃЉрЃљрЃА:
```php
class DiscountVisitor implements Visitor {
    public function visitBook(Book $book) {
        echo "рЃцрЃљрЃАрЃЊрЃљрЃЎрЃџрЃћрЃЉрЃљ рЃгрЃўрЃњрЃюрЃќрЃћ '{$book->getTitle()}': " . ($book->getPrice() * 0.9) . " рЃџрЃљрЃарЃў\n";
    }

    public function visitDVD(DVD $dvd) {
        echo "рЃцрЃљрЃАрЃЊрЃљрЃЎрЃџрЃћрЃЉрЃљ DVD-рЃќрЃћ '{$dvd->getTitle()}': " . ($dvd->getPrice() * 0.85) . " рЃџрЃљрЃарЃў\n";
    }
}
```

##### 5. рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃљ

рЃљрЃ«рЃџрЃљ, рЃерЃћрЃЋрЃЦрЃЏрЃюрЃљрЃЌ рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃћрЃЉрЃў рЃЊрЃљ рЃњрЃљрЃЏрЃЮрЃЋрЃўрЃДрЃћрЃюрЃЮрЃЌ **Visitor**:
```php
$items = [
    new Book("PHP Design Patterns", 50),
    new DVD("OOP in PHP", 30)
];

$discountVisitor = new DiscountVisitor();

foreach ($items as $item) {
    $item->accept($discountVisitor);
}
```

##### 5. рЃерЃћрЃЊрЃћрЃњрЃў

рЃќрЃћрЃЏрЃЮрЃЌ рЃЏрЃЮрЃДрЃЋрЃљрЃюрЃўрЃџрЃў рЃЎрЃЮрЃЊрЃўрЃА рЃњрЃљрЃерЃЋрЃћрЃЉрЃўрЃАрЃљрЃА рЃЏрЃўрЃЋрЃўрЃдрЃћрЃЉрЃЌ рЃерЃћрЃЏрЃЊрЃћрЃњ рЃерЃћрЃЊрЃћрЃњрЃА:
```
рЃцрЃљрЃАрЃЊрЃљрЃЎрЃџрЃћрЃЉрЃљ рЃгрЃўрЃњрЃюрЃќрЃћ 'PHP Design Patterns': 45 рЃџрЃљрЃарЃў
рЃцрЃљрЃАрЃЊрЃљрЃЎрЃџрЃћрЃЉрЃљ DVD-рЃќрЃћ 'OOP in PHP': 25.5 рЃџрЃљрЃарЃў
```


---

#### ­Ъџђ рЃЊрЃљрЃАрЃЎрЃЋрЃюрЃљ

рЃарЃЮрЃњрЃЮрЃарЃф рЃЋрЃЊрЃћрЃЊрЃљрЃЋрЃЌ, **DiscountVisitor** рЃЎрЃџрЃљрЃАрЃЏрЃљ рЃњрЃљрЃюрЃљрЃ«рЃЮрЃарЃфрЃўрЃћрЃџрЃљ рЃАрЃ«рЃЋрЃљрЃЊрЃљрЃАрЃ«рЃЋрЃљ рЃбрЃўрЃърЃўрЃА рЃћрЃџрЃћрЃЏрЃћрЃюрЃбрЃћрЃЉрЃќрЃћ рЃцрЃљрЃАрЃЊрЃљрЃЎрЃџрЃћрЃЉрЃљ рЃўрЃАрЃћ, рЃарЃЮрЃЏ рЃБрЃерЃБрЃљрЃџрЃЮрЃЊ **Book** рЃЊрЃљ **DVD** рЃЎрЃџрЃљрЃАрЃћрЃЉрЃерЃў рЃфрЃЋрЃџрЃўрЃџрЃћрЃЉрЃћрЃЉрЃў рЃљрЃа рЃЊрЃљрЃњрЃЋрЃГрЃўрЃарЃЊрЃљ. рЃћрЃА рЃљрЃЕрЃЋрЃћрЃюрЃћрЃЉрЃА **Visitor** рЃърЃљрЃбрЃћрЃарЃюрЃўрЃА рЃФрЃљрЃџрЃљрЃА - рЃЕрЃЋрЃћрЃю рЃерЃћрЃњрЃЋрЃўрЃФрЃџрЃўрЃљ рЃљрЃ«рЃљрЃџрЃў рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃћрЃЉрЃў рЃЊрЃљрЃЋрЃљрЃЏрЃљрЃбрЃЮрЃЌ рЃЎрЃџрЃљрЃАрЃћрЃЉрЃќрЃћ рЃЏрЃљрЃЌрЃў рЃЏрЃЮрЃърЃЊрЃўрЃцрЃўрЃЎрЃљрЃфрЃўрЃўрЃА рЃњрЃљрЃарЃћрЃерЃћ, рЃарЃљрЃф рЃърЃарЃЮрЃњрЃарЃљрЃЏрЃўрЃА рЃњрЃљрЃцрЃљрЃарЃЌрЃЮрЃћрЃЉрЃљрЃА рЃБрЃцрЃарЃЮ рЃЏрЃљрЃарЃбрЃўрЃЋрЃА рЃЊрЃљ рЃЏрЃЮрЃЦрЃюрЃўрЃџрЃА рЃ«рЃЊрЃўрЃА.

рЃћрЃА рЃърЃљрЃбрЃћрЃарЃюрЃў рЃњрЃљрЃюрЃАрЃљрЃЎрЃБрЃЌрЃарЃћрЃЉрЃўрЃЌ рЃАрЃљрЃАрЃљрЃарЃњрЃћрЃЉрЃџрЃЮрЃљрЃЊ, рЃарЃЮрЃЊрЃћрЃАрЃљрЃф рЃњрЃЋрЃљрЃЦрЃЋрЃА рЃарЃЌрЃБрЃџрЃў рЃАрЃбрЃарЃБрЃЦрЃбрЃБрЃарЃўрЃА рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃћрЃЉрЃў, рЃарЃЮрЃЏрЃћрЃџрЃЌрЃљрЃф рЃАрЃ«рЃЋрЃљрЃЊрЃљрЃАрЃ«рЃЋрЃљ рЃбрЃўрЃърЃўрЃА рЃЊрЃљрЃЏрЃБрЃерЃљрЃЋрЃћрЃЉрЃљ рЃАрЃГрЃўрЃарЃЊрЃћрЃЉрЃљрЃЌ, рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃљ:
- рЃцрЃљрЃАрЃћрЃЉрЃўрЃА рЃЎрЃљрЃџрЃЎрЃБрЃџрЃљрЃфрЃўрЃљ.
- рЃарЃћрЃърЃЮрЃарЃбрЃўрЃюрЃњрЃў.
- рЃАрЃћрЃарЃўрЃљрЃџрЃўрЃќрЃљрЃфрЃўрЃљ рЃЊрЃљ рЃџрЃЮрЃњрЃўрЃарЃћрЃЉрЃљ.