**State (მდგომარეობის) პატერნი** არის ქცევილით ტიპის პატერნი, რომელიც გამოიყენება ობიექტის ქცევის დინამიურად შესაცვლელად, მისი **შიდა მდგომარეობის (State)** მიხედვით. ეს საშუალებას გვაძლევს, ავირიდოთ დიდი ზომის if-else ან switch ოპერატორები და მოვახდინოთ კოდის უკეთესი ირგანიზება.

#### როდის გამოვიყენოთ State პატერნი?

State პატერნი სასარგებლოად, როდესაც:
- ობიექტს აქვს მრავალი მდგომარეობა და მისი ქცევა უნდა შეიცვალოს ამ მდგომარეობის შესაბამისად.
- არ გვინდა გამოვიყენოთ if-else ან switch ოპერატორები მთელ კოდში
- გვინდა, რომ ობიექტის თითოეულ მდგომარეობას ფქონდეს ცალკე კლასში აღწერილი ლოგიკა.

---

#### State პატერნის მაგალითი
მოდით, განვიხილოთ განვიხილოთ მარტივი მაგალით - **ფრენის რეჟიმი (Flight Mode) ტელეფონში**. ტელეფონს შეიძლება ჰქონდეს რამდენიმე მდგომარეობა:
- **Normal Mode** - ჩვეულებრივი რეჟიმი.
- **Silent Mode** - ჩუმი რეჟიმი.
- **Airplane Mode** - თვითმფრინავის რეჟიმი.

##### State ინტერფეისის შექმნა

ყველა მდგომარეობას უნდა ჰქონდეს საერთო მეთოდი **alert()**, რომელიც განსაზღვრავს მის ქცევას.
```php
<?php

interface MobileState {
    public function alert();
}
```

##### 2 კონკრეტული მდგომარეობის კლასები

ახლა შევქმნათ სამი განსხვავებული მდგომარეობის კლასი:
```php
<?php

class NormalMode implements MobileState {
    public function alert() {
        echo "🔔 ტელეფონი რეკავს ხმამაღლა! \n";
    }
}

class SilentMode implements MobileState {
    public function alert() {
        echo "🔕 ტელეფონი ჩუმია, ვიბრაციის გარეშე! \n";
    }
}

class AirplaneMode implements MobileState {
    public function alert() {
        echo "✈ ტელეფონი თვითმფრინავის რეჟიმშია, ქსელის გარეშე! \n";
    }
}
```

##### 3. მთავარი კლასი (კონტექტი)

ეს კლლასი შეიცავს მიმდინარე მდგომარეობას და საშუალებას გვაძლევს, შევცვალოთ იგი დინამიურად.
```php
<?php

class MobilePhone {
    private MobileState $state;

    public function __construct(MobileState $state) {
        $this->state = $state;
    }

    public function setState(MobileState $state) {
        $this->state = $state;
    }

    public function pressAlert() {
        $this->state->alert();
    }
}
```

##### 4. პატერნის გამოყენება

ახლა დავინახოთ, როგორ შეგვიძლია ამ პატერნის გამოყენება რეალურ სიტუაციაში.
```php
<?php

// ტელეფონის შექმნა ჩუმი რეჟიმით
$phone = new MobilePhone(new SilentMode());
$phone->pressAlert();  // 🔕 ტელეფონი ჩუმია, ვიბრაციის გარეშე!

// რეჟიმის შეცვლა Normal Mode-ზე
$phone->setState(new NormalMode());
$phone->pressAlert();  // 🔔 ტელეფონი რეკავს ხმამაღლა!

// რეჟიმის შეცვლა Airplane Mode-ზე
$phone->setState(new AirplaneMode());
$phone->pressAlert();  // ✈ ტელეფონი თვითმფრინავის რეჟიმშია, ქსელის გარეშე!
```

---

#### State პატერნის უპირატესობნები

✅ **კოდის ორგანიზება** - თითოეული მდგომარეობა ინახება ცალკე კლასში, რაც ზრდის კოდის სისურფთავეს.    
✅ **მოდულარობა** - შეგვიძლია მარტივად დავამატოთ ახალი მდგომარეობა არსებული კოდის შეცვლის გარეშე.    
✅ **მარტივი მხარდაჭერა და გაფართოება** -- საჭიროა მხოლოდ ახალი State კლასის დამატება, კომპლექსური if-else, switch ბლოკების გარეშე.

---

#### 🚀 დასკვნა

State პატერნი იდეალური არჩევანია, როდესაც ობიექტის ქცევა უნდა შეიცვალოს მისი შიდა მდგომარეობის მიხედვით. PHP - ში ამ პატენის გამოყენება მნიშვნელოვნად აუმჯობესებს კოდის სტრუქტურას, რაც აადვილებს მის მოდიფიცირებას და მხარდაჟერას.